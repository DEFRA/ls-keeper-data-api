openapi: 3.0.3
info:
  title: Livestock API 
  description: |-
    The Livestock API is reference data service that allows developers to build applications that connect with Defra's Livestock - Location and Party Data domain.
    
    With the Livestock API, you can:

    * **Authenticate** with the Defra's identity system.
    * **Retrieve** location based reference data such as Sites and its related data such as Parties, Species, Marks etc.
    * **Retrieve** reference data for Parties and its related information.
    * **Provide** count of the current sites within the scope of Livestock Information Service.
    
  termsOfService: http://www.defra.gov.uk/legal
  
  contact:
    name: Defra Livestock Data Services Support
    url: https://www.defra.gov.uk/support
    email: support_cdp_platform.@defra.gov.uk
  
  license:
    name: Livestock Data Services Agreement
    url: https://www.defra.gov.uk/services-agreement/
  
  version: 1.1.0

  # Change History
  # 1.0.0 - Initial MVP version, where both Location and Party API specifications have been merged into a single Open API 3.0.3 spec.
  # 1.1.0 - Changes:
  # - Include a new parameter in api/sites endpoint which accepts an array of site identifiers.
  # - Include a new parameter in api/sites endpoint which accepts an array of Site Ids.
 
externalDocs:
  description: Defra website
  url: http://www.defra.gov.uk/
tags:
  - name: site
  - name: site reference
  - name: location
  - name: party
  - name: housekeeping

security:
  - bearerAuth: []

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: JWT authorisation token

  schemas:
    HealthMonitorResponse:
      type: object
      properties:
        healthy:
          type: boolean
        dependencies:
          type: array
          items:
            type: object
            properties:
              name:
                type: string
              healthy:
                type: boolean
              ping:
                type: number
                minimum: -1
      example:
        healthy: true
        dependencies:
          - name: db
            healthy: true
            ping: 21
          - name: search
            healthy: true
            ping: 26

    Country:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          description : "This is an immutable field which represents the golden key of the reference object."
        code: 
          type: string
          example: GB-ENG
          readOnly: true
          description: "This the business code/key of the Country object. This is a mutable field, where this field data could possibly change."
        name:
          type: string
          readOnly: true
          example: England
          description: "This the business name of the Country object. This is a mutable field, where this field data could possibly change."
        longName:
          type: string
          readOnly: true
          example: England - United Kingdom
        euTradeMemberFlag:
          type: boolean
          example: true
          readOnly: false
        devolvedAuthorityFlag:
          type: boolean
          readOnly: false
          example: true
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Country record was updated"
      required:
        - code
        - name
  
    Species:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          description : "This is an immutable field which represents the golden key of the reference object."
        code: 
          type: string
          example: CTT
        name:
          type: string
          readOnly: true
          example: Cattle
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Species record was updated"
      required:
        - code
        - name
        
    Marks:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        mark: 
          type: string
          example: 564545
          
        #communication:
        #    type: array
        #    readOnly: true
        #    items:
        #        $ref: '#/components/schemas/Communication'
                
        species:
            type: array
            readOnly: true
            items:
                $ref: '#/components/schemas/Species'
                
        startDate:
          type: string
          format: date-time
          description: "The date the herd/flock/group mark was assigned."                                                          
        endDate:
          type: string
          format: date-time
          example: null
          description: "The date the herd/flock/group mark was removed."
      required:
        - mark
 
    ManagedSpecies:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        code: 
          type: string
          example: CTT
        name:
          type: string
          readOnly: true
          example: Cattle
        startDate:
          type: string
          format: date
          nullable: false
          description: "The date the said species came under the care of the said Role."
        endDate:
          type: string
          format: date
          nullable: true
          description: "The date the said species left the care of the said Role."
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the ManagedSpecies record was updated"
      required:
        - code
        - name

    CountryList:
      type: object
      properties:
        count:
          type: integer
          example: 1
        values:
          type: array
          items:
            $ref: '#/components/schemas/Country'
    
    ProblemDetails:
      type: 'object'
      description: |-
        The ProblemDetails object provides detailed information about an errors that occurred during an API call execution. 
        
        This problem object :
        
          * **conforms** to the [RFC9457](https://www.rfc-editor.org/info/rfc9457) (formerly [RFC7807](https://tools.ietf.org/html/rfc7807)).
        
          * is **extended** with the following properties:
        
          * **errors** - an array of errors providing contextual information on the root cause of the problem.        
        
        The ProblemDetails referenced by this domain utilize the [SmartBear Problems Registry](https://problems-registry.smartbear.com/).
      properties:
        type:
          type: 'string'
          description: 'A URI reference that identifies the problem type.'
          format: 'uri'
          maxLength: 1024
        status:
          type: 'integer'
          description: 'The HTTP status code generated by the origin server for this occurrence of the problem.'
          format: 'int32'
          minimum: 100
          maximum: 599
        title:
          type: 'string'
          description: 'A short, human-readable summary of the problem type. It should not change from occurrence to occurrence of the problem, except for purposes of localization.'
          maxLength: 1024
        detail:
          type: 'string'
          description: 'A human-readable explanation specific to this occurrence of the problem.'
          maxLength: 4096
        instance:
          type: 'string'
          description: 'A URI reference that identifies the specific occurrence of the problem.'
          format: 'uri'
        errors:
          type: array
          nullable: true
          items:
            $ref: '#/components/schemas/ErrorDetail'
      required:
        - 'type'
        - 'title'
        
    ErrorDetail:
      type: 'object'
      description: 'An object to provide explicit details on a problem towards an API consumer.'
      properties:
        detail:
          type: 'string'
          description: 'A granular description on the specific error related to a body property, query parameter, path parameters, and/or header.'
          maxLength: 4096
        source:
          type: 'string'
          description: 'The source of the error, e.g. the name of a header, query or path parameter, or a JSON pointer to a specific request body property.'
          maxLength: 1024
        value:
          type: 'string'
          description: 'The value that has caused the error, e.g. the value passed in as a header, query or path parameter, or a request body property that lead to the error.'
        code:
          type: 'string'
          description: 'A string containing additional provider specific codes to identify the error context.'
          maxLength: 50
      required:
        - 'detail'

    Address:
      type: object
      properties:
        id: 
          type: string
          format: uuid
          readOnly: true
          description : "This is an immutable field which represents the golden key of the master data object."
        uprn:
          type: integer
          nullable: true
          example: 671544009
        addressLine1: 
          type: string
          nullable: false
          description: "This single address line is associated with the OS Address Base Fields such as SAO_TEXT, SAO_START_NUMBER, PAO_TEXT, PAO_START_NUMBER and STREET_DESCRIPTION."
          example: "Hansel & Gretel Farm, Pigs Street"
        addressLine2:
            type:  string
            example: "Cloverfield"
            nullable: true
            description : "This optional field is associated with the OS Address Base Field of LOCALITY, if applicable."
        postTown:
            type: string
            example: "Clover town"
            nullable: true
            description : "This field is to describes the Town or City of the Address. It is aligned to the OS Address Base Field of POST_TOWN."
        county:
            type: string
            example: "Sussex"
            nullable: true
            description : "This optional field is associated with the OS Address Base Field of ADMINISTRATIVE_AREA."
        postcode:
          type: string
          example: "S36 2BS"
          nullable: false
        country:
          $ref: '#/components/schemas/Country'
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Address record was updated"
      required:
        - addressLine1
        - postCode
        
    Location:
      type: object
      properties:
        id: 
          type: string
          format: uuid
          readOnly: true
          description : "This is an immutable field which represents the golden key of the master data object."
        osMapReference:
          type: string
          example: "SK25979936"
        easting:
          type: number
          format: float
          example: 425978.12
        northing:
          type: number
          format: float
          example: 399361.50
        address:
          $ref: '#/components/schemas/Address'
        communication:
            type: array
            readOnly: true
            items:
                $ref: '#/components/schemas/Communication'
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Location record was updated"
           
    LocationList:
      type: object
      properties:
        count:
          type: integer
          example: 1
        values:
          type: array
          items:
            $ref: '#/components/schemas/Location'

    Communication:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          description : "This is an immutable field which represents the golden key of the master data object."
        email:
          type: string
          example: john.doe@somecompany.co.uk        
        mobile:
          type: string
          example: "07123456789"
        landline:
          type: string
          example: "0114 1231234"
        primaryContactFlag:
          type: boolean
          nullable: true
          example: true
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Party Communication record was updated"

    Role:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          description : "This is an immutable field which represents the golden key of the reference object."
        code:
          type: string
          readOnly : true
          description: "This is the unique code assigned to the Role entity"
          example: "LIVESTOCKKEEPER"
        name:
          type: string
          example: "Livestock Keeper"
          nullable: false
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Role record was updated" 

    RoleList:
      type: object
      properties:
        count:
          type: integer
          example: 1
        values:
          type: array
          items:
            $ref: '#/components/schemas/Role'

    RolesToParty:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        role:
           $ref: '#/components/schemas/Role'
        speciesManagedByRole:
          type: array
          readOnly: true
          description: "This is the list of species managed by the said Role assigned to the said Party. Normally Roles such as Keeper will have species asscociated with them."
          items:
                $ref: '#/components/schemas/ManagedSpecies'
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Roles To Party record was updated"

    Party:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        title:
          type: string
          example: "Mr"
        firstName:
          type: string
          example: "John"
        lastName:
          type: string
          example: "Doe"
        name:
          type: string
          example: "John Doe"
        customerNumber:
          type: string
          example: "C77473"
          description: "This is the L or the C number provided from the SAM system."
        partyType:
            type: string
            example : Person
            enum:
            - Person
            - Organisation
        communication:
            type: array
            readOnly: true
            items:
                $ref: '#/components/schemas/Communication'
        correspondanceAddress:
          $ref: '#/components/schemas/Address'
        partyRoles:
            type: array
            readOnly: true
            items:
                $ref: '#/components/schemas/RolesToParty'        
        state:
          type: string
          enum:
          - active
          - inactive
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Party record was updated"
          
    PartyList:
      type: object
      properties:
        count:
          type: integer
          example: 1
        values:
          type: array
          items:
            $ref: '#/components/schemas/Party'
 
    SiteIdentifier:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        identifier:
          type: string
          example: "57/103/2335"
          nullable: false
        type:
          $ref: '#/components/schemas/SiteIdentifierType'
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the SiteIdentifier record was updated"
      required:
        - identifier
        - type    
    
    Site:
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        type:
          $ref: '#/components/schemas/SiteType'
        name:
          type: string
          example: Hansel & Gretel Farm
        identifiers:
              type: array
              items:
                $ref: '#/components/schemas/SiteIdentifier'
        state:
          type: string
          enum:
          - active
          - inactive
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the Site record was updated"
      required:
        - siteType
        - source
    
    SiteDetail:
      allOf:
        - $ref: '#/components/schemas/Site'
        - type: object
          properties:
            
            startDate:
              type: string
              format: date
              nullable: false
            endDate:
              type: string
              format: date
              nullable: true
              example: null
            source:
              type: string
              example: SAM
            destroyIdentityDocumentsFlag:
              type: boolean
              nullable: true
              example: null
            location:
              $ref: '#/components/schemas/Location'
            parties:
              type: array
              items:
                $ref: '#/components/schemas/Party'
            species:
              type: array
              readOnly: true
              items:
                $ref: '#/components/schemas/Species'
            marks:
              type: array
              readOnly: true
              items:
                $ref: '#/components/schemas/Marks'
            activities:
              type: array
              items:
                $ref: '#/components/schemas/SiteActivity'
            lastUpdatedDate:
                type: string
                format: date-time
                description: "The timestamp of the last time the SiteDetail record was updated"
          required:
            - siteType
            - name
            - parties
            - startDate

    SiteList:
      type: object
      properties:
        count:
          type: integer
          example: 1
          description: Total number of sites returned (or available)        
        values:
          type: array
          description: The list of site details
          items:
            allOf:
              - $ref: '#/components/schemas/SiteDetail'
              - type: object             
      required:
        - count
        - values
  
    SiteActivityType:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
          readOnly: true
          description : "This is an immutable field which represents the golden key of the reference object."
        code:
          type: string
          nullable: false
          example: WP
        name:
          type: string
          readOnly: true
          example: Wildlife Park
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the SiteActivity record was updated"
      required:
      - code
      - name
      
    SiteActivity:
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: "3fa85f64-5717-4562-b3fc-2c963f66afa6"
          readOnly: true
        type:
          $ref: '#/components/schemas/SiteActivityType'
        startDate:
          type: string
          format: date
          nullable: true
        endDate:
          type: string
          format: date
          nullable: true
          example: null
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the SiteActivity record was updated"
      required:
      - code
      - name
    
    SiteActivityList:
      type: object
      properties:
        count:
          type: integer
          example: 1
          description: Total number of site activities returned (or available)
        values:
          type: array
          description: The list of site activity details
          items:
             $ref: '#/components/schemas/SiteActivity'
             
    SiteActivityTypeList:
      type: object
      properties:
        count:
          type: integer
          example: 1
          description: Total number of site activities returned (or available)
        values:
          type: array
          description: The list of site activity details
          items:
             $ref: '#/components/schemas/SiteActivityType'
      
    SitePartyList:
      type: object
      properties:
        count:
          type: integer
          example: 1
          description: Total number of site parties returned (or available)
        values:
          type: array
          description: The list of site party details
          items:
             $ref: '#/components/schemas/Party'
             
    SpeciesList:
      type: object
      properties:
        count:
          type: integer
          example: 1
          description: Total number of site species returned (or available)
        values:
          type: array
          description: The list of site species details
          items:
             $ref: '#/components/schemas/Species'
             
    SiteMarksList:
      type: object
      properties:
        count:
          type: integer
          example: 1
          description: Total number of marks returned for the sites(or available)
        values:
          type: array
          description: The list of site species details
          items:
             $ref: '#/components/schemas/Marks'
    
    SiteType:
      type: object
      required:
        - type
        - description
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          description : "This is an immutable field which represents the golden key of the reference object."
        code:
          type: string
          description: "The business key/code values for a siteType"
          example: "AH"
        name:
          type: string
          description: The type of site an animal may reside at.
          example: "Agricultural Holding"
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the SiteType record was updated"
          
    SiteTypeList:
      type: object
      properties:
        count:
          type: integer
          example: 1
        values:
          type: array
          items:
            $ref: '#/components/schemas/SiteType'
            
    SiteIdentifierType:
      type: object
      required:
        - type
        - description
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
          description : "This is an immutable field which represents the golden key of the reference object."
        code:
          type: string
          description: "The business key/code values for a Site Identiier Type"
          example: "CPHN"
        name:
          type: string
          description: The type which identifies the site identifier.
          example: "CPH Number"
        lastUpdatedDate:
          type: string
          format: date-time
          description: "The timestamp of the last time the SiteIdentifier Type record was updated"

  responses:
    BadRequest:
      description: 'The request was malformed or could not be processed.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
          examples:
            invalidRequestSchema:
              $ref: '#/components/examples/invalid-request-schema'            
    Unauthorized:
      description: 'Access token is not set or invalid.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
          examples:
            unauthorized:
              $ref: '#/components/examples/unauthorized'
    Forbidden:
      description: 'The requestor is not authorized to perform this operation on the resource.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
          examples:
            forbidden:
              $ref: '#/components/examples/forbidden'
    NotFound:
      description: 'The requested resource was not found.'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
          examples:
            notFound:
              $ref: '#/components/examples/not-found'
    ServerError:
      description: 'The server encountered an unexpected error'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
          examples:
            serverError:
              $ref: '#/components/examples/server-error'
    ServiceUnavailable:
      description: 'The service requested is unavailable'
      content:
        application/problem+json:
          schema:
            $ref: '#/components/schemas/ProblemDetails'
          examples:
            serviceUnavailable:
              $ref: '#/components/examples/service-unavailable'

  examples:
    invalid-request-schema:
      description: 'Representation of a 400 Bad Request response where the request has failed schema validation.'
      value:
        type: 'https://datatracker.ietf.org/doc/html/rfc9110#section-15.5.1'
        status: 400
        title: 'Request Schema Error'
        detail: 'The request failed schema validation.'
        errors:
          - detail: 'The request is missing the required query parameter {id}'
            code: 'S002'
            source: 'id'          
    unauthorized:
      value:
        type: 'https://datatracker.ietf.org/doc/html/rfc9110#section-15.5.2'
        title: 'Unauthorized'
        detail: 'Access token not set or invalid. The requested resource could not be returned'
        status: 401
    forbidden:
      value:
        type: 'https://datatracker.ietf.org/doc/html/rfc9110#section-15.5.4'
        title: 'Forbidden'
        detail: 'The resource could not be returned as the requestor is not authorized'
        status: 403
    not-found:
      value:
        type: 'https://datatracker.ietf.org/doc/html/rfc9110#section-15.5.5'
        title: 'Not found'
        detail: 'The requested resource was not found'
        status: 404
    server-error:
      value:
        type: 'https://datatracker.ietf.org/doc/html/rfc9110#section-15.6.1'
        title: 'Server Error'
        detail: 'The server encountered an unexpected error'
        status: 500
    service-unavailable:
      value:
        type: 'https://datatracker.ietf.org/doc/html/rfc9110#section-15.6.4'
        title: 'Service Unavailable'
        detail: 'The service is currently unavailable'
        status: 503

paths:
  /api/health:
    get:
      security:
        - {}
      tags:
       - housekeeping
      summary: Execute a health check
      description: Execute a health check on the API and its dependencies
      operationId: getHealth
      responses:
        '200':
          description: OK - Successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/HealthMonitorResponse'
  
  /api/countries:
    get:
      tags:
        - site reference
      summary: Retrieve a list of ISO Countries
      description: Endpoint created to retrieve a list of ISO Countries. Parameters can be set to filter by licensed species on premises.
      operationId: getCountries
      parameters:
      - name: name
        in: query
        required: false
        schema:
          type: string
          example: "England"
      - name: code
        in: query
        required: false
        schema:
          type: array
          items:
            type: string
          example: ["GB", "FR"]
      - name: euTradeMember
        in: query
        required: false
        schema:
          type: boolean
          example: true
      - name: devolvedAuthority
        in: query
        required: false
        schema:
          type: boolean
          example: true      
      - name: page
        in: query
        required: false
        schema:
          type: integer
      - name: pageSize
        in: query
        description: This parameter accepts the number of records expected in the response. If no value is provided, it will provide 100 records per page. The minimum is set to 1 and the maximum records per page is set to 500.
        required: false
        schema:
          type: integer
          default: 100     # If client doesn't send the pageSize, use 100
          minimum: 1      # Client cannot request 0 or negative records
          maximum: 500   # Client cannot request more than 500 records per page
      - name: order
        in: query
        required: false
        schema: 
          type: string
          enum:
            - code
            - name
      - name: sort
        in: query
        required: false
        schema:
          type: string
          enum:
            - asc
            - desc
      - name: lastUpdatedDate
        in:   query
        required: false
        schema:
            type: string
            format: date-time
            description: Returns only Countries that have been updated since this timestamp. This is the key parameter for Change Data Capture (CDC)
      responses:
        '200':
          description: OK - Successful operation
          content:
            application/json:
              schema:  
                $ref: '#/components/schemas/CountryList'
        '400':
          $ref: '#/components/responses/BadRequest'
  
  /api/countries/{id}:
    get:
      tags:
        - site reference
      summary: Retrieve a country detailed information.
      description: The endpoint returns an object containing the requested country detailed information.
      operationId: getCountry
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK - Successful request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Country'
        '404':
          $ref: '#/components/responses/NotFound'

  /api/sites:
    get:
      tags:
        - site
      summary: Retrieve a list of available sites
      description: Endpoint created to retrieve a list of sites. Parameters can be set to filter by various elements such as Site Identifiers, Site Type, Site Id, Party Id etc.
      operationId: getSites
      parameters:
        - name: siteIdentifier
          in:   query
          required: false
          description: This parameter accepts a single site identifier such as CPH Number or FSA No or Port No etc which is associated with different site type such as CPH No for Agricultural Holdings.
          schema:
            type: string
            example: 57/103/2335
        - name: siteIdentifiers
          in:   query
          description: This parameter accepts an array of strings which represents site identifiers such as CPH Number, FSA No, Port No etc which are associated with different site type such as CPH No for Agricultural Holdings. A maximum of 50 values are allowed at a time.
          required: false
          style: form
          explode: false
          schema:
            type: array
            items:
               type: string
            minItems: 1 # Optional: ensure at least 1 item if parameter is present.
            maxItems: 50 # Required: This restricts the array to 50 items.
        - name: name
          in:   query
          required: false
          description: This parameter accepts the name of the site.
          schema:
            type: string
            example: Hansel & Gretel Farm            
        - name: sitetype
          in: query
          required: false
          description: This parameter accepts the Site Type . The possible list of Site Types and its corresponding description is mentioned below. Please only send the site type code for ex AC, AH as query parameter.
          schema:
            type: array
            items:
              type: string
              enum: 
                 -  AC - Assembly Centre
                 -  AH - Agricultural Holding
                 -  AP - Airport
                 -  CA - Calf Collection Centre
                 -  CC - Collection Centre
                 -  HA - Haulier
                 -  HK - Hunt Kennel
                 -  KY - Knacker's Yard
                 -  LA - Lairage
                 -  LR - Laboratory/Research Establishment
                 -  MA - Market
                 -  QU - Quarantine
                 -  SG - Showground
                 -  SM - S/H Both, MP & Cs
                 -  SP - Seaport
                 -  SR - Slaughter House (Red Meat)
                 -  ST - Staging Post
                 -  SW - Slaughter House (White Meat)
                 -  VE - Veterinary Practice/Hospital/School
                 -  VI - Veterinary Investigation Centre
                 -  WP - Wildlife Park
                 -  ZO - Zoo
                 -  CL - Common Land
        - name: siteId
          in: query
          description: This parameter accepts the id of the site.
          schema:
            type: string
            format: uuid
        - name: siteIds
          in:   query
          description: This parameter accepts an array of strings which represents site id which is a immutable UUID, assigned to a CPH Holding. A maximum of 50 values are allowed at a time.
          required: false
          style: form
          explode: false
          schema:
            type: array
            items:
               type: string
               format: uuid
            minItems: 1 # Optional: ensure at least 1 item if parameter is present.
            maxItems: 50 # Required: This restricts the array to 50 items.
        - name: partyId
          in: query
          description: This parameter accepts Party Id (UUID) asscociated with the said site.
          required: false
          schema:
            type: string
            format: uuid        
        - name: page
          in: query
          required: false
          schema:
            type: integer            
        - name: pageSize
          in: query
          description: This parameter accepts the number of records expected in the response. If no value is provided, it will provide 100 records per page. The minimum is set to 1 and the maximum records per page is set to 500.
          required: false
          schema:
            type: integer
            default: 100     # If client doesn't send the pageSize, use 100
            minimum: 1      # Client cannot request 0 or negative records
            maximum: 500   # Client cannot request more than 500 records per page            
        - name: order
          in: query
          description: This parameter accepts the order in which the data could be retreived. The possible list is mentioned below.
          required: false
          schema: 
            type: string
            enum:
              - type
              - name
              - siteIdentifier 
        - name: sort
          in: query
          required: false
          schema:
            type: string
            enum:
              - asc
              - desc
        - name: lastUpdatedDate
          in:   query
          required: false
          description: This parameter accepts the date timestamp to retrieve the data which has changed since. This is the key parameter for Change Data Capture (CDC)
          schema:
            type: string
            format: date-time            
      responses:
        '200':
          description: OK - Successful operation
          content:
            application/json:
              schema:  
                $ref: '#/components/schemas/SiteList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/sites/count:
    get:
      tags:
          - site
      summary: Retrieve the total count of all available sites.
      description: The endpoint returns the total count of all available sites.
      operationId: getSiteCount
      parameters:
        - name: lastUpdatedDate
          in:   query
          required: false
          description: This parameter accepts the date timestamp to retrieve the data which has changed since. This is the key parameter for Change Data Capture (CDC)
          schema:
            type: string
            format: date-time            
      responses:
        '200':
          description: OK - Successful response with the site count
          content:
            application/json:
              schema:
                type: integer
                properties:
                    count:
                      type: integer
                      format: int64
                      example: "47000"
                      description: The total number of sites.
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
  
  /api/sites/{id}:
    get:
      tags:
          - site
      summary: Retrieve a site detailed information.
      description: The endpoint returns an object containing the requested site detailed information.
      operationId: getSiteById
      parameters:
        - name: id
          in: path
          required: true
          description: This parameter accepts the id of the site.
          schema:
            type: string
            format: uuid        
      responses:
        '200':
          description: OK - Successful request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SiteDetail'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
          
  /api/sites/{id}/parties:
    get:
      tags:
        - site
      summary: 'Retrieve a list of site parties'
      description: 'This endpoint can be used to retrieve site parties'
      operationId: 'getSiteParties'
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'OK - successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SitePartyList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
   
  /api/sites/{id}/parties/{pid}:
    get:
      tags:
        - site
      summary: 'Get a site party'
      description: 'Returns a site party'
      operationId: getSitePartyById
      parameters:
        - name: id
          in: path
          required: true
          description: 'The id of the site to retrieve'
          schema:
            type: string
            format: uuid                 
        - name: pid
          in: path
          required: true
          description: 'The id of the site party to retrieve'
          schema:
            type: string
            format: uuid          
      responses:
        '200':
          description: 'OK - successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Party'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
          
  /api/sites/{id}/species:
    get:
      tags:
        - site
      summary: 'Retrieve a list of site species'
      description: 'This endpoint can be used to retrieve site species'
      operationId: 'getSiteSpecies'
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'OK - successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SpeciesList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
    
  /api/sites/{id}/species/{sid}:
    get:
      tags:
        - site
      summary: 'Get a list of site species'
      description: 'Returns a site species'
      operationId: getSiteSpeciesById
      parameters:
        - name: id
          in: path
          required: true
          description: 'The id of the site to retrieve'
          schema:
            type: string
            format: uuid          
        - name: sid
          in: path
          required: true
          description: 'The id of the site species to retrieve'
          schema:
            type: string
            format: uuid          
      responses:
        '200':
          description: 'OK - successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Species'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/sites/{id}/marks:
    get:
      tags:
        - site
      summary: 'Retrieve a list of site marks'
      description: 'This endpoint can be used to retrieve site marks'
      operationId: 'getSiteMarks'
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 'OK - successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SiteMarksList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
    
  /api/sites/{id}/marks/{mid}:
    get:
      tags:
        - site
      summary: 'Get a list of site marks'
      description: 'Returns a site marks'
      operationId: getSiteMarksById
      parameters:
        - name: id
          in: path
          required: true
          description: 'The id of the site to retrieve'
          schema:
            type: string
            format: uuid          
        - name: mid
          in: path
          required: true
          description: 'The id of the site marks to retrieve'
          schema:
            type: string
            format: uuid          
      responses:
        '200':
          description: 'OK - successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Marks'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/sites/{id}/activities:
    get:
      tags:
        - site
      summary: 'Retrieve a list of a sites activities'
      description: 'This endpoint can be used to retrieve a list of a sites activities'
      operationId: 'getSiteActivities'
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
        - name: lastUpdatedDate
          in:   query
          required: false
          description: This parameter accepts the date timestamp to retrieve the data which has changed since. This is the key parameter for Change Data Capture (CDC)
          schema:
            type: string
            format: date-time            
      responses:
        '200':
          description: 'OK - successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SiteActivityList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
    
  /api/sites/{id}/activities/{aid}:
    get:
      tags:
        - site
      summary: 'Get a sites activity by id'
      description: 'Returns a sites activity by its id.'
      operationId: getSiteActivityById
      parameters:
        - name: id
          in: path
          required: true
          description: 'The id of the site to retrieve'
          schema:
            type: string
            format: uuid          
        - name: aid
          in: path
          required: true
          description: 'The id of the activity to retrieve'
          schema:
            type: string
            format: uuid          
      responses:
        '200':
          description: 'OK - successful'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SiteActivity'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/sitetypes:
    get:
      summary: Retrieve all site types
      description: Get a list of all available site types
      operationId: getSiteTypes
      parameters:
        - name: lastUpdatedDate
          in:   query
          required: false
          description: This parameter accepts the date timestamp to retrieve the data which has changed since. This is the key parameter for Change Data Capture (CDC)
          schema:
            type: string
            format: date-time            
      tags:
        - site reference
      responses:
        '200':
          description: OK - Successful response
          content:
            application/json:
              schema:
                 items:
                  $ref: '#/components/schemas/SiteTypeList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
          
  /api/sitetypes/{id}:
    get:
      tags:
          - site reference
      summary: Retrieve a sitetype detailed information.
      description: The endpoint returns an object containing the requested sitetype and any relations information.
      operationId: getSiteTypeById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK - Successful request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SiteType'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
    
  /api/species:
    get:
      summary: Retrieve all species types
      description: Get a list of all available species types
      operationId: getSpeciesTypes
      parameters:
        - name: lastUpdatedDate
          in:   query
          required: false
          description: This parameter accepts the date timestamp to retrieve the data which has changed since. This is the key parameter for Change Data Capture (CDC)
          schema:
            type: string
            format: date-time
      tags:
        - site reference
      responses:
        '200':
          description: OK - Successful response
          content:
            application/json:
              schema:
                 items:
                  $ref: '#/components/schemas/SpeciesList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/species/{id}:
    get:
      tags:
          - site reference
      summary: Retrieve a species types detailed information.
      description: The endpoint returns an object containing the requested species type and any relations information.
      operationId: getSpeciesTypeById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK - Successful request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Species'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
  
  /api/locations:
    get:
      tags:
        - location
      summary: Retrieve a list of locations
      description: This endpoint can be used to retrieve locations
      operationId: getLocations
      parameters:
        - name: postcode
          in: query
          required: false
          schema:
            type: string
            example: S36 2BS
        - name: lastUpdatedDate
          in:   query
          required: false
          description: This parameter accepts the date timestamp to retrieve the data which has changed since. This is the key parameter for Change Data Capture (CDC)
          schema:
            type: string
            format: date-time            
      responses:
        '200':
          description: OK - successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/LocationList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
  
  /api/locations/{id}:
    get:
      tags:
          - location
      summary: Retrieve a location detailed information.
      description: The endpoint returns an object containing the requested location detailed information.
      operationId: getLocationById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK - Successful request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Location'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/roles:
    get:
      summary: Retrieve all roles 
      description: Get a list of all available roles 
      operationId: getRoles
      parameters:
        - name: lastUpdatedDate
          in:   query
          required: false
          description: This parameter accepts the date timestamp to retrieve the data which has changed since. This is the key parameter for Change Data Capture (CDC)
          schema:
            type: string
            format: date-time            
      tags:
        - site reference
      responses:
        '200':
          description: OK - Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RoleList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/roles/{id}:
    get:
      tags:
          - site reference
      summary: Retrieve a role detailed information based on its identifier.
      description: The endpoint returns an object containing the requested role and any relations information.
      operationId: getRoleById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK - Successful request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Role'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/activities:
    get:
      summary: Retrieve all Activities 
      description: Get a list of all activities 
      operationId: getActivities
      parameters:
        - name: lastUpdatedDate
          in:   query
          required: false
          description: This parameter accepts the date timestamp to retrieve the data which has changed since. This is the key parameter for Change Data Capture (CDC)
          schema:
            type: string
            format: date-time            
      tags:
        - site reference
      responses:
        '200':
          description: OK - Successful response
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SiteActivityTypeList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'

  /api/activities/{id}:
    get:
      tags:
          - site reference
      summary: Retrieve a activities detailed information based on its identifier.
      description: The endpoint returns an object containing the requested activity and any relations information.
      operationId: getActivitiesById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK - Successful request
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SiteActivityType'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
          
  /api/parties:
    get:
      tags:
        - party
      summary: Retrieve a list of parties.
      description: The endpoint allows searching and retrieving a list of parties.
      operationId: getParties
      parameters:
        - name: firstName
          in: query
          required: false
          schema:
            type: string
            example: Jane
        - name: lastName
          in: query
          required: false
          schema:
            type: string
            example: Doe
        - name: email
          in: query
          required: false
          schema:
            type: string
        - name: page
          in: query
          required: false
          allowEmptyValue: false
          schema:
            type: integer
        - name: pageSize
          in: query
          description: This parameter accepts the number of records expected in the response. If no value is provided, it will provide 100 records per page. The minimum is set to 1 and the maximum records per page is set to 500.
          required: false
          schema:
            type: integer
            default: 100     # If client doesn't send the pageSize, use 100
            minimum: 1      # Client cannot request 0 or negative records
            maximum: 500   # Client cannot request more than 500 records per page
        - name: order
          in: query
          required: false
          allowEmptyValue: false
          schema: 
            type: string
            enum:
              - id
              - name
        - name: sort
          in: query
          required: false
          allowEmptyValue: false
          schema:
            type: string
            enum:
              - asc
              - desc 
        - name: lastUpdatedDate
          in:   query
          required: false
          schema:
            type: string
            format: date-time
            description: Returns only Party that have been updated since this timestamp. This is the key parameter for Change Data Capture (CDC)
      responses:
        '200':
          description: OK - Successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PartyList'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'
               
  /api/parties/{id}:
    get:
      tags:
        - party
      summary: Retrieve details of a party.
      description: The endpoint allows to retrieve details of a given party.
      operationId: getPartiesById
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: OK - Successful
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Party'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
        '500':
          $ref: '#/components/responses/ServerError'
        '503':
          $ref: '#/components/responses/ServiceUnavailable'